!function t(e,o,n){function r(i,s){if(!o[i]){if(!e[i]){var u="function"==typeof require&&require;if(!s&&u)return u(i,!0);if(l)return l(i,!0);throw new Error("Cannot find module '"+i+"'")}var c=o[i]={exports:{}};e[i][0].call(c.exports,function(t){var o=e[i][1][t];return r(o?o:t)},c,c.exports,t,e,o,n)}return o[i].exports}for(var l="function"==typeof require&&require,i=0;i<n.length;i++)r(n[i]);return r}({1:[function(t,e){var o;if(o=function(){function t(){}return t.prototype._name="Selections",t.prototype._getModel=function(t,e){return null==this._model&&(this._model=new e.Composition(this,[]).execute()),this._model},t.prototype._setModel=function(t){this._model=t},t.prototype._apply=function(t){var e,o,n,r,l,i,s,u,c,p;if(i=this._model.HB.getOperation(t.from),p=this._model.HB.getOperation(t.to),o=function(t,e,o){var n,r,l;r={};for(n in o)l=o[n],r[n]=l;return{from:t,to:e,attrs:r}},l=function(t,e){var o,n,r;r=[];for(o in e)n=e[o],r.push(t.attrs[o]=n);return r},(null==i||null==p)&&console.log("wasn't able to apply the selection.."),"select"===t.type)for(n=function(e,n,r,i,s,u){var c,p,f,a;if(null==e.selection||e.selection[n]!==e){for(p=e[r];null==p.selection&&"Delimiter"!==p.type;)p=p[r];if(null!=p.selection&&p.selection[u]!==p){for(f=p.selection,p=e;null==p.selection&&p!==s;)p=p[r];return p===f[u]?(c="to"===u?o(e,f[u],f.attrs):o(f[u],e,f.attrs),l(c,t.attrs),f[u]=e[r],f[u].selection=f,c[n].selection=c,c[u].selection=c):(c="to"===u?o(e,s,f.attrs):o(s,e,f.attrs),l(c,t.attrs),a="to"===u?o(s[i],f[u],f.attrs):o(f[u],s[i],f.attrs),f[u]=e[r],f[u].selection=f,c[n].selection=c,c[u].selection=c,a[n].selection=a,a[u].selection=a)}}},n(i,"from","prev_cl","next_cl",p,"to"),n(p,"to","next_cl","prev_cl",i,"from"),s=i,e=0;s!==p.next_cl||e>10;)if(e++,null!=s.selection)l(s.selection,t.attrs),s=s.selection.to.next_cl;else{for(c=s;s!==p;)s=s.next_cl;r=s,u=o(c,r,t.attrs),c.selection=u,r.selection=u,s=s.next_cl}else if("unselect"!==t.type)throw new Error("unsupported delta!");return t},t.prototype._unapply=function(t){var e,o;if(e=this._model.HB.getOperation(t.from),o=this._model.HB.getOperation(t.to),(null==e||null==o)&&console.log("wasn't able to unapply the selection.."),"select"===t.type)return delete e.selection,delete o.selection;if("unselect"!==t.type)throw new Error("unsupported delta!")},t.prototype.select=function(t,e,o){var n;return n={from:t.getUid(),to:e.getUid(),attrs:o,type:"select"},this._model.applyDelta(n)},t.prototype.unselect=function(t,e,o){var n;return n={from:t.getUid(),to:e.getUid(),attrs:o,type:"unselect"},this._model.applyDelta(n)},t.prototype.observe=function(t){return this._model.observe(t)},t}(),"undefined"!=typeof window&&null!==window){if(null==window.Y)throw new Error("You must first import Y!");window.Y.Selections=o}"undefined"!=typeof e&&null!==e&&(e.exports=o)},{}]},{},[1]);