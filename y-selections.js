!function t(e,o,n){function l(i,s){if(!o[i]){if(!e[i]){var c="function"==typeof require&&require;if(!s&&c)return c(i,!0);if(r)return r(i,!0);throw new Error("Cannot find module '"+i+"'")}var u=o[i]={exports:{}};e[i][0].call(u.exports,function(t){var o=e[i][1][t];return l(o?o:t)},u,u.exports,t,e,o,n)}return o[i].exports}for(var r="function"==typeof require&&require,i=0;i<n.length;i++)l(n[i]);return l}({1:[function(t,e){var o;if(o=function(){function t(){}return t.prototype._name="Selections",t.prototype._getModel=function(t,e){return null==this._model&&(this._model=new e.Composition(this,[]).execute()),this._model},t.prototype._setModel=function(t){this._model=t},t.prototype._apply=function(t){var e,o,n,l,r,i,s,c,u,f;if(i=this._model.HB.getOperation(t.from),f=this._model.HB.getOperation(t.to),e=function(t,e,o){var n,l,r;l={};for(n in o)r=o[n],l[n]=r;return{from:t,to:e,attrs:l}},r=function(t,e){var o,n,l;l=[];for(o in e)n=e[o],l.push(t.attrs[o]=n);return l},(null==i||null==f)&&console.log("wasn't able to apply the selection.."),"select"===t.type)for(o=function(){var o,n,l,s;if(null==i.selection||i.selection.from!==i){for(n=i.prev_cl;null==n.selection&&"Delimiter"!==n.type;)n=n.prev_cl;if(null!=n.selection&&n.selection.to!==n){for(l=n.selection,n=i;n!==l.to&&n!==f;)n=n.next_cl;return n===l.to?(o=e(i,l.to,l.attrs),r(o,t.attrs),l.to=i.prev_cl,l.to.selection=l,o.from.selection=o,o.to.selection=o):(o=e(i,f,l.attrs),r(o,t.attrs),s=e(f.next_cl,l.to,l.attrs),l.to=i.prev_cl,l.to.selection=l,o.from.selection=o,o.to.selection=o,s.from.selection=s,s.to.selection=s)}}},o(),n=function(){var o,n,l;if(null==f.selection||f.selection.to!==f){for(n=f;null==n.selection&&n!==i;)n=n.prev_cl;if(null!=n.selection&&n.selection.to!==n)return l=n.selection,o=e(f.next_cl,l.to,l.attrs),r(l,t.attrs),l.to=f,l.to.selection=l,o.from.selection=o,o.to.selection=o}},n(),s=i;s!==f.next_cl;)if(null!=s.selection)console.log("1"),r(s.selection,t.attrs),s=s.selection.to.next_cl;else{for(console.log("2"),u=s;null==s.next_cl.selection&&s!==f;)s=s.next_cl;l=s,c=e(u,l,t.attrs),u.selection=c,l.selection=c,s=s.next_cl}else if("unselect"!==t.type)throw new Error("unsupported delta!");return t},t.prototype._unapply=function(t){var e,o;if(e=this._model.HB.getOperation(t.from),o=this._model.HB.getOperation(t.to),(null==e||null==o)&&console.log("wasn't able to unapply the selection.."),"select"===t.type)return delete e.selection,delete o.selection;if("unselect"!==t.type)throw new Error("unsupported delta!")},t.prototype.select=function(t,e,o){var n;return n={from:t.getUid(),to:e.getUid(),attrs:o,type:"select"},this._model.applyDelta(n)},t.prototype.unselect=function(t,e,o){var n;return n={from:t.getUid(),to:e.getUid(),attrs:o,type:"unselect"},this._model.applyDelta(n)},t.prototype.observe=function(t){return this._model.observe(t)},t}(),"undefined"!=typeof window&&null!==window){if(null==window.Y)throw new Error("You must first import Y!");window.Y.Selections=o}"undefined"!=typeof e&&null!==e&&(e.exports=o)},{}]},{},[1]);