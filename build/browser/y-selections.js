(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var YSelections;

YSelections = (function() {
  function YSelections() {
    this._listeners = [];
    this._composition_value = [];
  }

  YSelections.prototype._name = "Selections";

  YSelections.prototype._getModel = function(Y, Operation) {
    if (this._model == null) {
      this._model = new Operation.Composition(this, []).execute();
    }
    return this._model;
  };

  YSelections.prototype._setModel = function(_model) {
    this._model = _model;
  };

  YSelections.prototype._getCompositionValue = function() {
    var composition_value, composition_value_operations, i, v;
    composition_value_operations = {};
    composition_value = (function() {
      var _i, _len, _ref, _results;
      _ref = this._composition_value;
      _results = [];
      for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {
        v = _ref[i];
        composition_value_operations["" + i + "/from"] = v.from;
        composition_value_operations["" + i + "/to"] = v.to;
        _results.push({
          attrs: v.attrs
        });
      }
      return _results;
    }).call(this);
    return {
      composition_value: composition_value,
      composition_value_operations: composition_value_operations
    };
  };

  YSelections.prototype._setCompositionValue = function(composition_value) {
    var v, _i, _len, _results;
    _results = [];
    for (_i = 0, _len = composition_value.length; _i < _len; _i++) {
      v = composition_value[_i];
      v.type = "select";
      _results.push(this._apply(v));
    }
    return _results;
  };

  YSelections.prototype._apply = function(delta) {
    var attr_list, createSelection, cut_off_from, cut_off_to, end, extendSelection, from, l, n, o, observer_call, selection, start, to, undos, v, _i, _len, _ref, _ref1;
    undos = [];
    from = delta.from;
    to = delta.to;
    observer_call = {
      from: from,
      to: to,
      type: delta.type,
      attrs: delta.attrs
    };
    _ref = this._listeners;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      l = _ref[_i];
      l.call(this, observer_call);
    }
    createSelection = (function(_this) {
      return function(from, to, attrs) {
        var n, new_attrs, new_sel, v;
        new_attrs = {};
        for (n in attrs) {
          v = attrs[n];
          new_attrs[n] = v;
        }
        new_sel = {
          from: from,
          to: to,
          attrs: new_attrs
        };
        _this._composition_value.push(new_sel);
        return new_sel;
      };
    })(this);
    extendSelection = function(selection) {
      var n, undo_attrs, undo_attrs_list, undo_need_select, undo_need_unselect, v, _j, _len1, _ref1, _ref2;
      if (delta.type === "unselect") {
        undo_attrs = {};
        _ref1 = delta.attrs;
        for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
          n = _ref1[_j];
          if (selection.attrs[n] != null) {
            undo_attrs[n] = selection.attrs[n];
          }
          delete selection.attrs[n];
        }
        return undos.push({
          from: delta.from,
          to: delta.to,
          attrs: undo_attrs,
          type: "select"
        });
      } else {
        undo_attrs = {};
        undo_attrs_list = [];
        undo_need_unselect = false;
        undo_need_select = false;
        _ref2 = delta.attrs;
        for (n in _ref2) {
          v = _ref2[n];
          if (selection.attrs[n] != null) {
            undo_attrs[n] = selection.attrs[n];
            undo_need_select = true;
          } else {
            undo_attrs_list.push(n);
            undo_need_unselect = true;
          }
          selection.attrs[n] = v;
        }
        if (undo_need_select) {
          undos.push({
            from: delta.from,
            to: delta.to,
            attrs: undo_attrs,
            type: "select"
          });
        }
        if (undo_need_unselect) {
          return undos.push({
            from: delta.from,
            to: delta.to,
            attrs: undo_attrs_list,
            type: "unselect"
          });
        }
      }
    };
    cut_off_from = function() {
      var new_selection, o, old_selection, opt_selection;
      if ((from.selection != null) && from.selection.from === from) {
        return;
      }
      o = from.prev_cl;
      while ((o.selection == null) && (o.type !== "Delimiter")) {
        o = o.prev_cl;
      }
      if ((o.selection == null) || o.selection.to === o) {
        return;
      }
      old_selection = o.selection;
      o = from;
      while ((o !== old_selection.to) && (o !== to)) {
        o = o.next_cl;
      }
      if (o === old_selection.to) {
        new_selection = createSelection(from, old_selection.to, old_selection.attrs);
        old_selection.to = from.prev_cl;
        old_selection.to.selection = old_selection;
        new_selection.from.selection = new_selection;
        return new_selection.to.selection = new_selection;
      } else {
        new_selection = createSelection(from, to, old_selection.attrs);
        opt_selection = createSelection(to.next_cl, old_selection.to, old_selection.attrs);
        old_selection.to = from.prev_cl;
        old_selection.to.selection = old_selection;
        opt_selection.from.selection = opt_selection;
        opt_selection.to.selection = opt_selection;
        new_selection.from.selection = new_selection;
        return new_selection.to.selection = new_selection;
      }
    };
    cut_off_from();
    cut_off_to = function() {
      var new_selection, o, old_selection;
      if ((to.selection != null) && to.selection.to === to) {
        return;
      }
      o = to;
      while ((o.selection == null) && (o !== from)) {
        o = o.prev_cl;
      }
      if ((o.selection == null) || o.selection["to"] === o) {
        return;
      }
      old_selection = o.selection;
      new_selection = createSelection(to.next_cl, old_selection.to, old_selection.attrs);
      old_selection.to = to;
      old_selection.to.selection = old_selection;
      new_selection.from.selection = new_selection;
      return new_selection.to.selection = new_selection;
    };
    cut_off_to();
    o = from;
    while (o !== to.next_cl) {
      if (o.selection != null) {
        extendSelection(o.selection, delta);
        o = o.selection.to.next_cl;
      } else {
        start = o;
        while ((o.next_cl.selection == null) && (o !== to)) {
          o = o.next_cl;
        }
        end = o;
        if (delta.type !== "unselect") {
          attr_list = [];
          _ref1 = delta.attrs;
          for (n in _ref1) {
            v = _ref1[n];
            attr_list.push(n);
          }
          undos.push({
            from: start,
            to: end,
            attrs: attr_list,
            type: "unselect"
          });
          selection = createSelection(start, end, delta.attrs);
          start.selection = selection;
          end.selection = selection;
        }
        o = o.next_cl;
      }
    }
    return delta;
  };

  YSelections.prototype._unapply = function(deltas) {
    var delta, _i, _len;
    for (_i = 0, _len = deltas.length; _i < _len; _i++) {
      delta = deltas[_i];
      this._apply(delta);
    }
  };

  YSelections.prototype.select = function(from, to, attrs) {
    var a, delta, delta_operations, length;
    length = 0;
    for (a in attrs) {
      length++;
      break;
    }
    if (length <= 0) {
      return;
    }
    delta_operations = {
      from: from,
      to: to
    };
    delta = {
      attrs: attrs,
      type: "select"
    };
    return this._model.applyDelta(delta, delta_operations);
  };

  YSelections.prototype.unselect = function(from, to, attrs) {
    var delta, delta_operations;
    if (typeof attrs === "string") {
      attrs = [attrs];
    }
    if (attrs.constructor !== Array) {
      throw new Error("Y.Selections.prototype.unselect expects an Array or String as the third parameter (attributes)!");
    }
    if (attrs.length <= 0) {
      return;
    }
    delta_operations = {
      from: from,
      to: to
    };
    delta = {
      attrs: attrs,
      type: "unselect"
    };
    return this._model.applyDelta(delta, delta_operations);
  };

  YSelections.prototype.getSelections = function(list) {
    var attrs, n, number_of_attrs, o, pos, result, sel_start, v, _ref;
    o = list.ref(0);
    if (o == null) {
      return [];
    }
    sel_start = null;
    pos = 0;
    result = [];
    while (o.next_cl != null) {
      if (o.isDeleted()) {
        o = o.next_cl;
        continue;
      }
      if (o.selection != null) {
        if (o.selection.from === o) {
          if (sel_start != null) {
            throw new Error("Found two consecutive from elements. The selections are no longer safe to use! (contact the owner of the repository)");
          } else {
            sel_start = pos;
          }
        }
        if (o.selection.to === o) {
          if (sel_start != null) {
            number_of_attrs = 0;
            attrs = {};
            _ref = o.selection.attrs;
            for (n in _ref) {
              v = _ref[n];
              attrs[n] = v;
              number_of_attrs++;
            }
            if (number_of_attrs > 0) {
              result.push({
                from: sel_start,
                to: pos,
                attrs: attrs
              });
            }
            sel_start = null;
          } else {
            throw new Error("Found two consecutive to elements. The selections are no longer safe to use! (contact the owner of the repository)");
          }
        } else if (o.selection.from !== o) {
          throw new Error("This reference should not point to this selection, because the selection does not point to the reference. The selections are no longer safe to use! (contact the owner of the repository)");
        }
      }
      pos++;
      o = o.next_cl;
    }
    return result;
  };

  YSelections.prototype.observe = function(f) {
    return this._listeners.push(f);
  };

  YSelections.prototype.unobserve = function(f) {
    return this._listeners = this._listeners.filter(function(g) {
      return f !== g;
    });
  };

  return YSelections;

})();

if (typeof window !== "undefined" && window !== null) {
  if (window.Y != null) {
    window.Y.Selections = YSelections;
  } else {
    throw new Error("You must first import Y!");
  }
}

if (typeof module !== "undefined" && module !== null) {
  module.exports = YSelections;
}


},{}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkg6XFxHaXRIdWJcXHktc2VsZWN0aW9uc1xcbm9kZV9tb2R1bGVzXFxndWxwLWJyb3dzZXJpZnlcXG5vZGVfbW9kdWxlc1xcYnJvd3NlcmlmeVxcbm9kZV9tb2R1bGVzXFxicm93c2VyLXBhY2tcXF9wcmVsdWRlLmpzIiwiSDpcXEdpdEh1YlxceS1zZWxlY3Rpb25zXFxsaWJcXHktc2VsZWN0aW9ucy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNHQSxJQUFBLFdBQUE7O0FBQUE7QUFDZSxFQUFBLHFCQUFBLEdBQUE7QUFDWCxJQUFBLElBQUMsQ0FBQSxVQUFELEdBQWMsRUFBZCxDQUFBO0FBQUEsSUFDQSxJQUFDLENBQUEsa0JBQUQsR0FBc0IsRUFEdEIsQ0FEVztFQUFBLENBQWI7O0FBQUEsd0JBSUEsS0FBQSxHQUFPLFlBSlAsQ0FBQTs7QUFBQSx3QkFNQSxTQUFBLEdBQVcsU0FBQyxDQUFELEVBQUksU0FBSixHQUFBO0FBQ1QsSUFBQSxJQUFPLG1CQUFQO0FBQ0UsTUFBQSxJQUFDLENBQUEsTUFBRCxHQUFjLElBQUEsU0FBUyxDQUFDLFdBQVYsQ0FBc0IsSUFBdEIsRUFBeUIsRUFBekIsQ0FBNEIsQ0FBQyxPQUE3QixDQUFBLENBQWQsQ0FERjtLQUFBO1dBRUEsSUFBQyxDQUFBLE9BSFE7RUFBQSxDQU5YLENBQUE7O0FBQUEsd0JBV0EsU0FBQSxHQUFXLFNBQUUsTUFBRixHQUFBO0FBQVUsSUFBVCxJQUFDLENBQUEsU0FBQSxNQUFRLENBQVY7RUFBQSxDQVhYLENBQUE7O0FBQUEsd0JBYUEsb0JBQUEsR0FBc0IsU0FBQSxHQUFBO0FBQ3BCLFFBQUEscURBQUE7QUFBQSxJQUFBLDRCQUFBLEdBQStCLEVBQS9CLENBQUE7QUFBQSxJQUNBLGlCQUFBOztBQUFvQjtBQUFBO1dBQUEsbURBQUE7b0JBQUE7QUFDbEIsUUFBQSw0QkFBNkIsQ0FBQSxFQUFBLEdBQUcsQ0FBSCxHQUFLLE9BQUwsQ0FBN0IsR0FBNkMsQ0FBQyxDQUFDLElB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QUFOLENBQVYsQ0FERztTQXJCUDtPQUhBO0FBQUEsTUEwQkEsR0FBQSxFQTFCQSxDQUFBO0FBQUEsTUEyQkEsQ0FBQSxHQUFJLENBQUMsQ0FBQyxPQTNCTixDQURGO0lBQUEsQ0FSQTtBQXFDQSxXQUFPLE1BQVAsQ0F0Q2E7RUFBQSxDQWhTZixDQUFBOztBQUFBLHdCQXdVQSxPQUFBLEdBQVMsU0FBQyxDQUFELEdBQUE7V0FDUCxJQUFDLENBQUEsVUFBVSxDQUFDLElBQVosQ0FBaUIsQ0FBakIsRUFETztFQUFBLENBeFVULENBQUE7O0FBQUEsd0JBMlVBLFNBQUEsR0FBVyxTQUFDLENBQUQsR0FBQTtXQUNULElBQUMsQ0FBQSxVQUFELEdBQWMsSUFBQyxDQUFBLFVBQVUsQ0FBQyxNQUFaLENBQW1CLFNBQUMsQ0FBRCxHQUFBO2FBQy9CLENBQUEsS0FBSyxFQUQwQjtJQUFBLENBQW5CLEVBREw7RUFBQSxDQTNVWCxDQUFBOztxQkFBQTs7SUFERixDQUFBOztBQWlWQSxJQUFHLGdEQUFIO0FBQ0UsRUFBQSxJQUFHLGdCQUFIO0FBQ0UsSUFBQSxNQUFNLENBQUMsQ0FBQyxDQUFDLFVBQVQsR0FBc0IsV0FBdEIsQ0FERjtHQUFBLE1BQUE7QUFHRSxVQUFVLElBQUEsS0FBQSxDQUFNLDBCQUFOLENBQVYsQ0FIRjtHQURGO0NBalZBOztBQXVWQSxJQUFHLGdEQUFIO0FBQ0UsRUFBQSxNQUFNLENBQUMsT0FBUCxHQUFpQixXQUFqQixDQURGO0NBdlZBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3Rocm93IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIil9dmFyIGY9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGYuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sZixmLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIlxyXG5cclxuXHJcbmNsYXNzIFlTZWxlY3Rpb25zXHJcbiAgY29uc3RydWN0b3I6ICgpLT5cclxuICAgIEBfbGlzdGVuZXJzID0gW11cclxuICAgIEBfY29tcG9zaXRpb25fdmFsdWUgPSBbXVxyXG5cclxuICBfbmFtZTogXCJTZWxlY3Rpb25zXCJcclxuXHJcbiAgX2dldE1vZGVsOiAoWSwgT3BlcmF0aW9uKSAtPlxyXG4gICAgaWYgbm90IEBfbW9kZWw/XHJcbiAgICAgIEBfbW9kZWwgPSBuZXcgT3BlcmF0aW9uLkNvbXBvc2l0aW9uKEAsIFtdKS5leGVjdXRlKClcclxuICAgIEBfbW9kZWxcclxuXHJcbiAgX3NldE1vZGVsOiAoQF9tb2RlbCktPlxyXG5cclxuICBfZ2V0Q29tcG9zaXRpb25WYWx1ZTogKCktPlxyXG4gICAgY29tcG9zaXRpb25fdmFsdWVfb3BlcmF0aW9ucyA9IHt9XHJcbiAgICBjb21wb3NpdGlvbl92YWx1ZSA9IGZvciB2LGkgaW4gQF9jb21wb3NpdGlvbl92YWx1ZVxyXG4gICAgICBjb21wb3NpdGlvbl92YWx1ZV9vcGVyYXRpb25zW1wiXCIraStcIi9mcm9tXCJdID0gdi5mcm9tXHJcbiAgICAgIGNvbXBvc2l0aW9uX3ZhbHVlX29wZXJhdGlvbnNbXCJcIitpK1wiL3RvXCJdID0gdi50b1xyXG4gICAgICB7XHJcbiAgICAgICAgYXR0cnM6IHYuYXR0cnNcclxuICAgICAgfVxyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIGNvbXBvc2l0aW9uX3ZhbHVlIDogY29tcG9zaXRpb25fdmFsdWVcclxuICAgICAgY29tcG9zaXRpb25fdmFsdWVfb3BlcmF0aW9uczogY29tcG9zaXRpb25fdmFsdWVfb3BlcmF0aW9uc1xyXG4gICAgfVxyXG5cclxuXHJcbiAgX3NldENvbXBvc2l0aW9uVmFsdWU6IChjb21wb3NpdGlvbl92YWx1ZSktPlxyXG4gICAgZm9yIHYgaW4gY29tcG9zaXRpb25fdmFsdWVcclxuICAgICAgdi50eXBlID0gXCJzZWxlY3RcIlxyXG4gICAgICBAX2FwcGx5IHZcclxuXHJcbiAgX2FwcGx5OiAoZGVsdGEpLT5cclxuICAgIHVuZG9zID0gW10gIyBsaXN0IG9mIGRlbHRhcyB0aGF0IGFyZSBuZWNlc3NhcnkgdG8gdW5kbyB0aGUgY2hhbmdlXHJcbiAgICBmcm9tID0gZGVsdGEuZnJvbVxyXG4gICAgdG8gPSBkZWx0YS50b1xyXG4gICAgIyBub3RpZnkgbGlzdGVuZXJzOlxyXG4gICAgb2JzZXJ2ZXJfY2FsbCA9XHJcbiAgICAgIGZyb206IGZyb21cclxuICAgICAgdG86IHRvXHJcbiAgICAgIHR5cGU6IGRlbHRhLnR5cGVcclxuICAgICAgYXR0cnM6IGRlbHRhLmF0dHJzXHJcbiAgICBmb3IgbCBpbiBAX2xpc3RlbmVyc1xyXG4gICAgICBsLmNhbGwgdGhpcywgb2JzZXJ2ZXJfY2FsbFxyXG4gICAgY3JlYXRlU2VsZWN0aW9uID0gKGZyb20sIHRvLCBhdHRycyk9PlxyXG4gICAgICBuZXdfYXR0cnMgPSB7fVxyXG4gICAgICBmb3Igbix2IG9mIGF0dHJzXHJcbiAgICAgICAgbmV3X2F0dHJzW25dID0gdlxyXG4gICAgICBuZXdfc2VsID0ge1xyXG4gICAgICAgIGZyb206IGZyb21cclxuICAgICAgICB0bzogdG9cclxuICAgICAgICBhdHRyczogbmV3X2F0dHJzXHJcbiAgICAgIH1cclxuICAgICAgQF9jb21wb3NpdGlvbl92YWx1ZS5wdXNoIG5ld19zZWxcclxuICAgICAgbmV3X3NlbFxyXG5cclxuICAgIGV4dGVuZFNlbGVjdGlvbiA9IChzZWxlY3Rpb24pLT5cclxuICAgICAgaWYgZGVsdGEudHlwZSBpcyBcInVuc2VsZWN0XCJcclxuICAgICAgICB1bmRvX2F0dHJzID0ge31cclxuICAgICAgICBmb3IgbiBpbiBkZWx0YS5hdHRyc1xyXG4gICAgICAgICAgaWYgc2VsZWN0aW9uLmF0dHJzW25dP1xyXG4gICAgICAgICAgICB1bmRvX2F0dHJzW25dID0gc2VsZWN0aW9uLmF0dHJzW25dXHJcbiAgICAgICAgICBkZWxldGUgc2VsZWN0aW9uLmF0dHJzW25dXHJcbiAgICAgICAgdW5kb3MucHVzaFxyXG4gICAgICAgICAgZnJvbTogZGVsdGEuZnJvbVxyXG4gICAgICAgICAgdG86IGRlbHRhLnRvXHJcbiAgICAgICAgICBhdHRyczogdW5kb19hdHRyc1xyXG4gICAgICAgICAgdHlwZTogXCJzZWxlY3RcIlxyXG4gICAgICBlbHNlXHJcbiAgICAgICAgdW5kb19hdHRycyA9IHt9ICMgZm9yIHVuZG8gc2VsZWN0aW9uIChvdmVyd3JpdGUgb2YgZXhpc3Rpbmcgc2VsZWN0aW9uKVxyXG4gICAgICAgIHVuZG9fYXR0cnNfbGlzdCA9IFtdICMgZm9yIHVuZG8gc2VsZWN0aW9uIChub3Qgb3ZlcndyaXRlKVxyXG4gICAgICAgIHVuZG9fbmVlZF91bnNlbGVjdCA9IGZhbHNlXHJcbiAgICAgICAgdW5kb19uZWVkX3NlbGVjdCA9IGZhbHNlXHJcbiAgICAgICAgZm9yIG4sdiBvZiBkZWx0YS5hdHRyc1xyXG4gICAgICAgICAgaWYgc2VsZWN0aW9uLmF0dHJzW25dP1xyXG4gICAgICAgICAgICB1bmRvX2F0dHJzW25dID0gc2VsZWN0aW9uLmF0dHJzW25dXHJcbiAgICAgICAgICAgIHVuZG9fbmVlZF9zZWxlY3QgPSB0cnVlXHJcbiAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHVuZG9fYXR0cnNfbGlzdC5wdXNoIG5cclxuICAgICAgICAgICAgdW5kb19uZWVkX3Vuc2VsZWN0ID0gdHJ1ZVxyXG4gICAgICAgICAgc2VsZWN0aW9uLmF0dHJzW25dID0gdlxyXG4gICAgICAgIGlmIHVuZG9fbmVlZF9zZWxlY3RcclxuICAgICAgICAgIHVuZG9zLnB1c2hcclxuICAgICAgICAgICAgZnJvbTogZGVsdGEuZnJvbVxyXG4gICAgICAgICAgICB0bzogZGVsdGEudG9cclxuICAgICAgICAgICAgYXR0cnM6IHVuZG9fYXR0cnNcclxuICAgICAgICAgICAgdHlwZTogXCJzZWxlY3RcIlxyXG4gICAgICAgIGlmIHVuZG9fbmVlZF91bnNlbGVjdFxyXG4gICAgICAgICAgdW5kb3MucHVzaFxyXG4gICAgICAgICAgICBmcm9tOiBkZWx0YS5mcm9tXHJcbiAgICAgICAgICAgIHRvOiBkZWx0YS50b1xyXG4gICAgICAgICAgICBhdHRyczogdW5kb19hdHRyc19saXN0XHJcbiAgICAgICAgICAgIHR5cGU6IFwidW5zZWxlY3RcIlxyXG5cclxuICAgICMgQWxnb3JpdGhtIG92ZXJ2aWV3OlxyXG4gICAgIyAxLiBjdXQgb2ZmIHRoZSBzZWxlY3Rpb24gdGhhdCBpbnRlcnNlY3RzIHdpdGggZnJvbVxyXG4gICAgIyAyLiBjdXQgb2ZmIHRoZSBzZWxlY3Rpb24gdGhhdCBpbnRlcnNlY3RzIHdpdGggdG9cclxuICAgICMgMy4gZXh0ZW5kIC8gYWRkIHNlbGVjdGlvbnMgaW5iZXR3ZWVuXHJcblxyXG4gICAgI1xyXG4gICAgIyMjIyAxLiBjdXQgb2ZmIHRoZSBzZWxlY3Rpb24gdGhhdCBpbnRlcnNlY3RzIHdpdGggZnJvbVxyXG4gICAgI1xyXG4gICAgY3V0X29mZl9mcm9tID0gKCktPlxyXG4gICAgICAjIGNoZWNrIGlmIGEgc2VsZWN0aW9uICh0byB0aGUgbGVmdCBvZiAkZnJvbSkgaW50ZXJzZWN0cyB3aXRoICRmcm9tXHJcbiAgICAgIGlmIGZyb20uc2VsZWN0aW9uPyBhbmQgZnJvbS5zZWxlY3Rpb24uZnJvbSBpcyBmcm9tXHJcbiAgICAgICAgIyBkb2VzIG5vdCBpbnRlcnNlY3QsIGJlY2F1c2UgdGhlIHN0YXJ0IGlzIGFscmVhZHkgc2VsZWN0ZWRcclxuICAgICAgICByZXR1cm5cclxuICAgICAgIyBmaW5kIGZpcnN0IHNlbGVjdGlvbiB0byB0aGUgbGVmdFxyXG4gICAgICBvID0gZnJvbS5wcmV2X2NsXHJcbiAgICAgIHdoaWxlIChub3Qgby5zZWxlY3Rpb24/KSBhbmQgKG8udHlwZSBpc250IFwiRGVsaW1pdGVyXCIpXHJcbiAgICAgICAgbyA9IG8ucHJldl9jbFxyXG4gICAgICBpZiAobm90IG8uc2VsZWN0aW9uPykgb3Igby5zZWxlY3Rpb24udG8gaXMgb1xyXG4gICAgICAgICMgbm8gaW50ZXJzZWN0aW9uXHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICAgICMgV2UgZm91bmQgYSBzZWxlY3Rpb24gdGhhdCBpbnRlcnNlY3RzIHdpdGggJGZyb20uXHJcbiAgICAgICMgTm93IHdlIGhhdmUgdG8gY2hlY2sgaWYgaXQgYWxzbyBpbnRlcnNlY3RzIHdpdGggJHRvLlxyXG4gICAgICAjIFRoZW4gd2UgY3V0IGl0IGluIHN1Y2ggYSB3YXksXHJcbiAgICAgICMgdGhhdCB0aGUgc2VsZWN0aW9uIGRvZXMgbm90IGludGVyc2VjdCB3aXRoICRmcm9tIGFuZCAkdG8gYW55bW9yZS5cclxuXHJcbiAgICAgICMgdGhpcyBpcyBhIHJlZmVyZW5jZSBmb3IgdGhlIHNlbGVjdGlvbnMgdGhhdCBhcmUgY3JlYXRlZC9tb2RpZmllZDpcclxuICAgICAgIyBvbGRfc2VsZWN0aW9uIGlzIG91dGVyIChub3QgYmV0d2VlbiAkZnJvbSAkdG8pXHJcbiAgICAgICMgICAtIHdpbGwgYmUgY2hhbmdlZCBpbiBzdWNoIGEgd2F5IHRoYXQgaXQgaXMgdG8gdGhlIGxlZnQgb2YgJGZyb21cclxuICAgICAgIyBuZXdfc2VsZWN0aW9uIGlzIGlubmVyIChpbmJldHdlZW4gJGZyb20gJHRvKVxyXG4gICAgICAjICAgLSBjcmVhdGVkLCByaWdodCBhZnRlciAkZnJvbVxyXG4gICAgICAjIG9wdF9zZWxlY3Rpb24gaXMgb3V0ZXIgKGFmdGVyICR0bylcclxuICAgICAgIyAgIC0gY3JlYXRlZCAoaWYgbmVjZXNzYXJ5KSwgcmlnaHQgYWZ0ZXIgJHRvXHJcbiAgICAgIG9sZF9zZWxlY3Rpb24gPSBvLnNlbGVjdGlvblxyXG5cclxuICAgICAgIyBjaGVjayBpZiBmb3VuZCBzZWxlY3Rpb24gYWxzbyBpbnRlcnNlY3RzIHdpdGggJHRvXHJcbiAgICAgICMgKiBzdGFydGluZyBmcm9tICRmcm9tLCBnbyB0byB0aGUgcmlnaHQgdW50aWwgeW91IGZvdW5kIGVpdGhlciAkdG8gb3Igb2xkX3NlbGVjdGlvbi50b1xyXG4gICAgICAjICoqIGlmICR0bzogbm8gaW50ZXJzZWN0aW9uIHdpdGggJHRvXHJcbiAgICAgICMgKiogaWYgJG9sZF9zZWxlY3Rpb24udG86IGludGVyc2VjdGlvbiB3aXRoICR0byFcclxuICAgICAgbyA9IGZyb21cclxuICAgICAgd2hpbGUgKG8gaXNudCBvbGRfc2VsZWN0aW9uLnRvKSBhbmQgKG8gaXNudCB0bylcclxuICAgICAgICBvID0gby5uZXh0X2NsXHJcblxyXG4gICAgICBpZiBvIGlzIG9sZF9zZWxlY3Rpb24udG9cclxuICAgICAgICAjIG5vIGludGVyc2VjdGlvbiB3aXRoIHRvIVxyXG4gICAgICAgICMgY3JlYXRlICRuZXdfc2VsZWN0aW9uXHJcbiAgICAgICAgbmV3X3NlbGVjdGlvbiA9IGNyZWF0ZVNlbGVjdGlvbiBmcm9tLCBvbGRfc2VsZWN0aW9uLnRvLCBvbGRfc2VsZWN0aW9uLmF0dHJzXHJcblxyXG4gICAgICAgICMgdXBkYXRlIHJlZmVyZW5jZXNcclxuICAgICAgICBvbGRfc2VsZWN0aW9uLnRvID0gZnJvbS5wcmV2X2NsXHJcbiAgICAgICAgIyB1cGRhdGUgcmVmZXJlbmNlcyAocG9pbnRlcnMgdG8gcmVzcGVjdGl2ZSBzZWxlY3Rpb25zKVxyXG4gICAgICAgIG9sZF9zZWxlY3Rpb24udG8uc2VsZWN0aW9uID0gb2xkX3NlbGVjdGlvblxyXG5cclxuICAgICAgICBuZXdfc2VsZWN0aW9uLmZyb20uc2VsZWN0aW9uID0gbmV3X3NlbGVjdGlvblxyXG4gICAgICAgIG5ld19zZWxlY3Rpb24udG8uc2VsZWN0aW9uID0gbmV3X3NlbGVjdGlvblxyXG4gICAgICBlbHNlXHJcbiAgICAgICAgIyB0aGVyZSBpcyBhbiBpbnRlcnNlY3Rpb24gd2l0aCB0byFcclxuXHJcbiAgICAgICAgIyBjcmVhdGUgJG5ld19zZWxlY3Rpb25cclxuICAgICAgICBuZXdfc2VsZWN0aW9uID0gY3JlYXRlU2VsZWN0aW9uIGZyb20sIHRvLCBvbGRfc2VsZWN0aW9uLmF0dHJzXHJcblxyXG4gICAgICAgICMgY3JlYXRlICRvcHRfc2VsZWN0aW9uXHJcbiAgICAgICAgb3B0X3NlbGVjdGlvbiA9IGNyZWF0ZVNlbGVjdGlvbiB0by5uZXh0X2NsLCBvbGRfc2VsZWN0aW9uLnRvLCBvbGRfc2VsZWN0aW9uLmF0dHJzXHJcblxyXG4gICAgICAgICMgdXBkYXRlIHJlZmVyZW5jZXNcclxuICAgICAgICBvbGRfc2VsZWN0aW9uLnRvID0gZnJvbS5wcmV2X2NsXHJcbiAgICAgICAgIyB1cGRhdGUgcmVmZXJlbmNlcyAocG9pbnRlcnMgdG8gcmVzcGVjdGl2ZSBzZWxlY3Rpb25zKVxyXG4gICAgICAgIG9sZF9zZWxlY3Rpb24udG8uc2VsZWN0aW9uID0gb2xkX3NlbGVjdGlvblxyXG5cclxuICAgICAgICBvcHRfc2VsZWN0aW9uLmZyb20uc2VsZWN0aW9uID0gb3B0X3NlbGVjdGlvblxyXG4gICAgICAgIG9wdF9zZWxlY3Rpb24udG8uc2VsZWN0aW9uID0gb3B0X3NlbGVjdGlvblxyXG5cclxuICAgICAgICBuZXdfc2VsZWN0aW9uLmZyb20uc2VsZWN0aW9uID0gbmV3X3NlbGVjdGlvblxyXG4gICAgICAgIG5ld19zZWxlY3Rpb24udG8uc2VsZWN0aW9uID0gbmV3X3NlbGVjdGlvblxyXG5cclxuXHJcbiAgICBjdXRfb2ZmX2Zyb20oKVxyXG5cclxuICAgICMgMi4gY3V0IG9mZiB0aGUgc2VsZWN0aW9uIHRoYXQgaW50ZXJzZWN0cyB3aXRoICR0b1xyXG4gICAgY3V0X29mZl90byA9ICgpLT5cclxuICAgICAgIyBjaGVjayBpZiBhIHNlbGVjdGlvbiAodG8gdGhlIGxlZnQgb2YgJHRvKSBpbnRlcnNlY3RzIHdpdGggJHRvXHJcbiAgICAgIGlmIHRvLnNlbGVjdGlvbj8gYW5kIHRvLnNlbGVjdGlvbi50byBpcyB0b1xyXG4gICAgICAgICMgZG9lcyBub3QgaW50ZXJzZWN0LCBiZWNhdXNlIHRoZSBlbmQgaXMgYWxyZWFkeSBzZWxlY3RlZFxyXG4gICAgICAgIHJldHVyblxyXG4gICAgICAjIGZpbmQgZmlyc3Qgc2VsZWN0aW9uIHRvIHRoZSBsZWZ0XHJcbiAgICAgIG8gPSB0b1xyXG4gICAgICB3aGlsZSAobm90IG8uc2VsZWN0aW9uPykgYW5kIChvIGlzbnQgZnJvbSlcclxuICAgICAgICBvID0gby5wcmV2X2NsXHJcbiAgICAgIGlmIChub3Qgby5zZWxlY3Rpb24/KSBvciBvLnNlbGVjdGlvbltcInRvXCJdIGlzIG9cclxuICAgICAgICAjIG5vIGludGVyc2VjdGlvblxyXG4gICAgICAgIHJldHVyblxyXG4gICAgICAjIFdlIGZvdW5kIGEgc2VsZWN0aW9uIHRoYXQgaW50ZXJzZWN0cyB3aXRoICR0by5cclxuICAgICAgIyBOb3cgd2UgaGF2ZSB0byBjdXQgaXQgaW4gc3VjaCBhIHdheSxcclxuICAgICAgIyB0aGF0IHRoZSBzZWxlY3Rpb24gZG9lcyBub3QgaW50ZXJzZWN0IHdpdGggJHRvIGFueW1vcmUuXHJcblxyXG4gICAgICAjIHRoaXMgaXMgYSByZWZlcmVuY2UgZm9yIHRoZSBzZWxlY3Rpb25zIHRoYXQgYXJlIGNyZWF0ZWQvbW9kaWZpZWQ6XHJcbiAgICAgICMgaXQgaXMgc2ltaWxhciB0byB0aGUgb25lIGFib3ZlLCBleGNlcHQgdGhhdCB3ZSBkbyBub3QgbmVlZCBvcHRfc2VsZWN0aW9uIGFueW1vcmUhXHJcbiAgICAgICMgb2xkX3NlbGVjdGlvbiBpcyBpbm5lciAoYmV0d2VlbiAkZnJvbSBhbmQgJHRvKVxyXG4gICAgICAjICAgLSB3aWxsIGJlIGNoYW5nZWQgaW4gc3VjaCBhIHdheSB0aGF0IGl0IGlzIHRvIHRoZSBsZWZ0IG9mICR0b1xyXG4gICAgICAjIG5ld19zZWxlY3Rpb24gaXMgb3V0ZXIgKCBvdXRlciAkZnJvbSBhbmQgJHRvKVxyXG4gICAgICAjICAgLSBjcmVhdGVkLCByaWdodCBhZnRlciAkdG9cclxuXHJcbiAgICAgIG9sZF9zZWxlY3Rpb24gPSBvLnNlbGVjdGlvblxyXG5cclxuICAgICAgIyBjcmVhdGUgJG5ld19zZWxlY3Rpb25cclxuICAgICAgbmV3X3NlbGVjdGlvbiA9IGNyZWF0ZVNlbGVjdGlvbiB0by5uZXh0X2NsLCBvbGRfc2VsZWN0aW9uLnRvLCBvbGRfc2VsZWN0aW9uLmF0dHJzXHJcblxyXG4gICAgICAjIHVwZGF0ZSByZWZlcmVuY2VzXHJcbiAgICAgIG9sZF9zZWxlY3Rpb24udG8gPSB0b1xyXG4gICAgICAjIHVwZGF0ZSByZWZlcmVuY2VzIChwb2ludGVycyB0byByZXNwZWN0aXZlIHNlbGVjdGlvbnMpXHJcbiAgICAgIG9sZF9zZWxlY3Rpb24udG8uc2VsZWN0aW9uID0gb2xkX3NlbGVjdGlvblxyXG5cclxuICAgICAgbmV3X3NlbGVjdGlvbi5mcm9tLnNlbGVjdGlvbiA9IG5ld19zZWxlY3Rpb25cclxuICAgICAgbmV3X3NlbGVjdGlvbi50by5zZWxlY3Rpb24gPSBuZXdfc2VsZWN0aW9uXHJcblxyXG4gICAgY3V0X29mZl90bygpXHJcblxyXG4gICAgIyAzLiBleHRlbmQgLyBhZGQgc2VsZWN0aW9ucyBpbiBiZXR3ZWVuXHJcbiAgICBvID0gZnJvbVxyXG4gICAgd2hpbGUgKG8gaXNudCB0by5uZXh0X2NsKVxyXG4gICAgICBpZiBvLnNlbGVjdGlvbj9cclxuICAgICAgICAjIGp1c3QgZXh0ZW5kIHRoZSBleGlzdGluZyBzZWxlY3Rpb25cclxuICAgICAgICBleHRlbmRTZWxlY3Rpb24gby5zZWxlY3Rpb24sIGRlbHRhICMgd2lsbCBwdXNoIHVuZG8tZGVsdGFzIHRvICR1bmRvc1xyXG4gICAgICAgIG8gPSBvLnNlbGVjdGlvbi50by5uZXh0X2NsXHJcbiAgICAgIGVsc2VcclxuICAgICAgICAjIGNyZWF0ZSBhIG5ldyBzZWxlY3Rpb24gKHVudGlsIHlvdSBmaW5kIHRoZSBuZXh0IG9uZSlcclxuICAgICAgICBzdGFydCA9IG9cclxuICAgICAgICB3aGlsZSAobm90IG8ubmV4dF9jbC5zZWxlY3Rpb24/KSBhbmQgKG8gaXNudCB0bylcclxuICAgICAgICAgIG8gPSBvLm5leHRfY2xcclxuICAgICAgICBlbmQgPSBvXHJcbiAgICAgICAgaWYgZGVsdGEudHlwZSBpc250IFwidW5zZWxlY3RcIlxyXG4gICAgICAgICAgYXR0cl9saXN0ID0gW11cclxuICAgICAgICAgIGZvciBuLHYgb2YgZGVsdGEuYXR0cnNcclxuICAgICAgICAgICAgYXR0cl9saXN0LnB1c2ggblxyXG4gICAgICAgICAgdW5kb3MucHVzaFxyXG4gICAgICAgICAgICBmcm9tOiBzdGFydFxyXG4gICAgICAgICAgICB0bzogZW5kXHJcbiAgICAgICAgICAgIGF0dHJzOiBhdHRyX2xpc3RcclxuICAgICAgICAgICAgdHlwZTogXCJ1bnNlbGVjdFwiXHJcbiAgICAgICAgICBzZWxlY3Rpb24gPSBjcmVhdGVTZWxlY3Rpb24gc3RhcnQsIGVuZCwgZGVsdGEuYXR0cnNcclxuICAgICAgICAgIHN0YXJ0LnNlbGVjdGlvbiA9IHNlbGVjdGlvblxyXG4gICAgICAgICAgZW5kLnNlbGVjdGlvbiA9IHNlbGVjdGlvblxyXG4gICAgICAgIG8gPSBvLm5leHRfY2xcclxuXHJcbiAgICByZXR1cm4gZGVsdGEgIyBpdCBpcyBuZWNlc3NhcnkgdGhhdCBkZWx0YSBpcyByZXR1cm5lZCBpbiB0aGUgd2F5IGl0IHdhcyBhcHBsaWVkIG9uIHRoZSBnbG9iYWwgZGVsdGEuXHJcbiAgICAjIHNvIHRoYXQgeWpzIGNhbiBrbm93IGV4YWN0bHkgd2hhdCB3YXMgYXBwbGllZC5cclxuXHJcbiAgIyBcInVuZG9cIiBhIGRlbHRhIGZyb20gdGhlIGNvbXBvc2l0aW9uX3ZhbHVlXHJcbiAgX3VuYXBwbHk6IChkZWx0YXMpLT5cclxuICAgICMgX2FwcGx5IHJldHVybnMgYSBfbGlzdF8gb2YgZGVsdGFzLCB0aGF0IGFyZSBuZWNjZXNzYXJ5IHRvIHVuZG8gdGhlIGNoYW5nZS4gTm93IHdlIF9hcHBseSBldmVyeSBkZWx0YSBpbiB0aGUgbGlzdCAoYW5kIGRpc2NhcmQgdGhlIHJlc3VsdHMpXHJcbiAgICBmb3IgZGVsdGEgaW4gZGVsdGFzXHJcbiAgICAgIEBfYXBwbHkgZGVsdGFcclxuICAgIHJldHVyblxyXG5cclxuICAjIHVwZGF0ZSB0aGUgZ2xvYmFsRGVsdGEgd2l0aCBkZWx0YVxyXG5cclxuXHJcbiAgIyBzZWxlY3QgX2Zyb21fLCBfdG9fIHdpdGggYW4gX2F0dHJpYnV0ZV9cclxuICBzZWxlY3Q6IChmcm9tLCB0bywgYXR0cnMpLT5cclxuICAgIGxlbmd0aCA9IDBcclxuICAgIGZvciBhIG9mIGF0dHJzXHJcbiAgICAgIGxlbmd0aCsrXHJcbiAgICAgIGJyZWFrXHJcbiAgICBpZiBsZW5ndGggPD0gMFxyXG4gICAgICByZXR1cm5cclxuXHJcbiAgICBkZWx0YV9vcGVyYXRpb25zID1cclxuICAgICAgZnJvbTogZnJvbVxyXG4gICAgICB0bzogdG9cclxuICAgIGRlbHRhID1cclxuICAgICAgYXR0cnM6IGF0dHJzXHJcbiAgICAgIHR5cGU6IFwic2VsZWN0XCJcclxuXHJcbiAgICBAX21vZGVsLmFwcGx5RGVsdGEoZGVsdGEsIGRlbHRhX29wZXJhdGlvbnMpXHJcblxyXG4gICMgdW5zZWxlY3QgX2Zyb21fLCBfdG9fIHdpdGggYW4gX2F0dHJpYnV0ZV9cclxuICB1bnNlbGVjdDogKGZyb20sIHRvLCBhdHRycyktPlxyXG4gICAgaWYgdHlwZW9mIGF0dHJzIGlzIFwic3RyaW5nXCJcclxuICAgICAgYXR0cnMgPSBbYXR0cnNdXHJcbiAgICBpZiBhdHRycy5jb25zdHJ1Y3RvciBpc250IEFycmF5XHJcbiAgICAgIHRocm93IG5ldyBFcnJvciBcIlkuU2VsZWN0aW9ucy5wcm90b3R5cGUudW5zZWxlY3QgZXhwZWN0cyBhbiBBcnJheSBvciBTdHJpbmcgYXMgdGhlIHRoaXJkIHBhcmFtZXRlciAoYXR0cmlidXRlcykhXCJcclxuICAgIGlmIGF0dHJzLmxlbmd0aCA8PSAwXHJcbiAgICAgIHJldHVyblxyXG4gICAgZGVsdGFfb3BlcmF0aW9ucyA9XHJcbiAgICAgIGZyb206IGZyb21cclxuICAgICAgdG86IHRvXHJcbiAgICBkZWx0YSA9XHJcbiAgICAgIGF0dHJzOiBhdHRyc1xyXG4gICAgICB0eXBlOiBcInVuc2VsZWN0XCJcclxuXHJcbiAgICBAX21vZGVsLmFwcGx5RGVsdGEoZGVsdGEsIGRlbHRhX29wZXJhdGlvbnMpXHJcblxyXG4gICMgKiBnZXQgYWxsIHRoZSBzZWxlY3Rpb25zIG9mIGEgeS1saXN0XHJcbiAgIyAqIHRoaXMgd2lsbCBhbHNvIHRlc3QgaWYgdGhlIHNlbGVjdGlvbnMgYXJlIHdlbGwgZm9ybWVkIChhZnRlciAkZnJvbSBmb2xsb3dzICR0byBmb2xsb3dzICRmcm9tIC4uKVxyXG4gIGdldFNlbGVjdGlvbnM6IChsaXN0KS0+XHJcbiAgICBvID0gbGlzdC5yZWYoMClcclxuICAgIGlmIG5vdCBvP1xyXG4gICAgICByZXR1cm4gW11cclxuXHJcbiAgICBzZWxfc3RhcnQgPSBudWxsXHJcbiAgICBwb3MgPSAwXHJcbiAgICByZXN1bHQgPSBbXVxyXG5cclxuICAgIHdoaWxlIG8ubmV4dF9jbD9cclxuICAgICAgaWYgby5pc0RlbGV0ZWQoKVxyXG4gICAgICAgIG8gPSBvLm5leHRfY2xcclxuICAgICAgICBjb250aW51ZVxyXG4gICAgICBpZiBvLnNlbGVjdGlvbj9cclxuICAgICAgICBpZiBvLnNlbGVjdGlvbi5mcm9tIGlzIG9cclxuICAgICAgICAgIGlmIHNlbF9zdGFydD9cclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yIFwiRm91bmQgdHdvIGNvbnNlY3V0aXZlIGZyb20gZWxlbWVudHMuIFRoZSBzZWxlY3Rpb25zIGFyZSBubyBsb25nZXIgc2FmZSB0byB1c2UhIChjb250YWN0IHRoZSBvd25lciBvZiB0aGUgcmVwb3NpdG9yeSlcIlxyXG4gICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICBzZWxfc3RhcnQgPSBwb3NcclxuICAgICAgICBpZiBvLnNlbGVjdGlvbi50byBpcyBvXHJcbiAgICAgICAgICBpZiBzZWxfc3RhcnQ/XHJcbiAgICAgICAgICAgIG51bWJlcl9vZl9hdHRycyA9IDBcclxuICAgICAgICAgICAgYXR0cnMgPSB7fVxyXG4gICAgICAgICAgICBmb3Igbix2IG9mIG8uc2VsZWN0aW9uLmF0dHJzXHJcbiAgICAgICAgICAgICAgYXR0cnNbbl0gPSB2XHJcbiAgICAgICAgICAgICAgbnVtYmVyX29mX2F0dHJzKytcclxuICAgICAgICAgICAgaWYgbnVtYmVyX29mX2F0dHJzID4gMFxyXG4gICAgICAgICAgICAgIHJlc3VsdC5wdXNoXHJcbiAgICAgICAgICAgICAgICBmcm9tOiBzZWxfc3RhcnRcclxuICAgICAgICAgICAgICAgIHRvOiBwb3NcclxuICAgICAgICAgICAgICAgIGF0dHJzOiBhdHRyc1xyXG4gICAgICAgICAgICBzZWxfc3RhcnQgPSBudWxsXHJcbiAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvciBcIkZvdW5kIHR3byBjb25zZWN1dGl2ZSB0byBlbGVtZW50cy4gVGhlIHNlbGVjdGlvbnMgYXJlIG5vIGxvbmdlciBzYWZlIHRvIHVzZSEgKGNvbnRhY3QgdGhlIG93bmVyIG9mIHRoZSByZXBvc2l0b3J5KVwiXHJcbiAgICAgICAgZWxzZSBpZiBvLnNlbGVjdGlvbi5mcm9tIGlzbnQgb1xyXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yIFwiVGhpcyByZWZlcmVuY2Ugc2hvdWxkIG5vdCBwb2ludCB0byB0aGlzIHNlbGVjdGlvbiwgYmVjYXVzZSB0aGUgc2VsZWN0aW9uIGRvZXMgbm90IHBvaW50IHRvIHRoZSByZWZlcmVuY2UuIFRoZSBzZWxlY3Rpb25zIGFyZSBubyBsb25nZXIgc2FmZSB0byB1c2UhIChjb250YWN0IHRoZSBvd25lciBvZiB0aGUgcmVwb3NpdG9yeSlcIlxyXG4gICAgICBwb3MrK1xyXG4gICAgICBvID0gby5uZXh0X2NsXHJcbiAgICByZXR1cm4gcmVzdWx0XHJcblxyXG4gIG9ic2VydmU6IChmKS0+XHJcbiAgICBAX2xpc3RlbmVycy5wdXNoIGZcclxuXHJcbiAgdW5vYnNlcnZlOiAoZiktPlxyXG4gICAgQF9saXN0ZW5lcnMgPSBAX2xpc3RlbmVycy5maWx0ZXIgKGcpLT5cclxuICAgICAgZiAhPSBnXHJcblxyXG5cclxuaWYgd2luZG93P1xyXG4gIGlmIHdpbmRvdy5ZP1xyXG4gICAgd2luZG93LlkuU2VsZWN0aW9ucyA9IFlTZWxlY3Rpb25zXHJcbiAgZWxzZVxyXG4gICAgdGhyb3cgbmV3IEVycm9yIFwiWW91IG11c3QgZmlyc3QgaW1wb3J0IFkhXCJcclxuXHJcbmlmIG1vZHVsZT9cclxuICBtb2R1bGUuZXhwb3J0cyA9IFlTZWxlY3Rpb25zXHJcbiJdfQ==
